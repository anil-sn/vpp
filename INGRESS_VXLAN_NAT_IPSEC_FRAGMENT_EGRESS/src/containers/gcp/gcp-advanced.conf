# Advanced GCP Endpoint Configuration Example
# This file demonstrates advanced features for the destination endpoint

# Multiple TAP interfaces for different services
create tap host-if-name vpp-tap0 host-ip4-addr 10.0.3.1/24
create tap host-if-name vpp-tap1 host-ip4-addr 10.0.3.10/24

# Advanced reassembly configuration
ip reassembly {
  # Maximum concurrent reassemblies
  max-reassemblies 1024
  
  # Reassembly timeout (seconds)
  timeout 30
  
  # Memory pool size
  memory-size 128M
  
  # Enable full reassembly
  enable-all-protocols
}

# Packet capture configuration
# pcap trace add host-eth0 file /tmp/gcp-ingress.pcap count 1000
# pcap trace add tap0 file /tmp/gcp-tap.pcap count 1000

# Load balancing for multiple endpoints
# create lb vip 10.0.3.1 protocol udp port 2055 encap gre4
# lb as 10.0.3.1 port 2055 10.10.10.10 port 2055
# lb as 10.0.3.1 port 2055 10.10.10.11 port 2055

# Traffic mirroring
# create interface mirror src host-eth0 dst tap0

# Service chaining
# set interface service-chain host-eth0 next-hop tap0