// =========================================================================
// VPP BNG Lab - Kea DHCPv6 Server Configuration
//
// This file configures the Kea server to handle IPv6 address assignment
// for subscribers connecting to the BNG.
// =========================================================================
{
"Dhcp6": {
    // Kea will listen on all available interfaces.
    // As with DHCPv4, VPP relays all requests to the loopback interface (::1).
    "interfaces-config": {
        "interfaces": [ "*" ]
    },

    // Use a simple in-memory lease database for a clean start every time.
    "lease-database": {
        "type": "memfile",
        "persist": false
    },

    // Standard DHCPv6 lease timers.
    "valid-lifetime": 4000,

    // Define the IPv6 address pools for each of the 4 VLANs.
    // The BNG (VPP) will include a Relay-Forward message that tells Kea
    // which interface the original request came from.
    "subnet6": [
        {
            "id": 201, // Corresponds to VLAN 101
            "subnet": "2001:db8:101::/64",
            "pools": [
                // Define the pool of /128 addresses to be assigned to clients.
                { "pool": "2001:db8:101::100 - 2001:db8:101::ffff" }
            ]
        },
        {
            "id": 202, // Corresponds to VLAN 102
            "subnet": "2001:db8:102::/64",
            "pools": [
                { "pool": "2001:db8:102::100 - 2001:db8:102::ffff" }
            ]
        },
        {
            "id": 203, // Corresponds to VLAN 103
            "subnet": "2001:db8:103::/64",
            "pools": [
                { "pool": "2001:db8:103::100 - 2001:db8:103::ffff" }
            ]
        },
        {
            "id": 204, // Corresponds to VLAN 104
            "subnet": "2001:db8:104::/64",
            "pools": [
                { "pool": "2001:db8:104::100 - 2001:db8:104::ffff" }
            ]
        }
    ]
}
}