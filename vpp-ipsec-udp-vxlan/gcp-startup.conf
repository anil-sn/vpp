# gcp-startup.conf
#
# This file controls the startup behavior of the VPP daemon.
# It is mounted into /etc/vpp/startup.conf inside the container.

# The 'unix' stanza controls core VPP process settings.
unix {
  # 'nodaemon' keeps VPP running in the foreground, which is standard for containers.
  nodaemon
  # Specifies the log file location.
  log /var/log/vpp/vpp.log
  # Generates a full core dump if the process crashes, for deep debugging.
  full-coredump
  # This is the path to the socket that vppctl uses to communicate with VPP.
  # Our setup and test scripts wait for this file to exist.
  cli-listen /run/vpp/cli.sock
  # Sets the group ownership of the VPP process for security.
  gid vpp
}

dpdk {
  # This is the most important setting.
  # It tells VPP/DPDK not to scan for or touch any
  # physical network cards.
  no-pci
}

# The 'plugins' stanza controls which VPP plugins are loaded at startup.
# Disabling unused plugins can save memory and reduce startup time.
plugins {
  # Load the default set of plugins.
  plugin default { enable }

  # --- Required Plugins for this Test ---
  # Native cryptographic engine.
  plugin crypto_native_plugin.so { enable }
  # Core IPsec protocol functionality.
  plugin ipsec_plugin.so { enable }
  # Driver for 'host-interface', which connects VPP to the container's veth pair.
  plugin af_packet_plugin.so { enable }
  
  # --- Optional but Commonly Used Plugins ---
  plugin nat_plugin.so { enable }
  plugin acl_plugin.so { enable }
}